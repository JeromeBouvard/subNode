{"version":3,"file":"public\\js\\app.js.map","sources":["app/app.js","app/js/controllers/ConfigCtrl.js","app/js/controllers/HomeCtrl.js","app/js/controllers/ShowCtrl.js","app/js/controllers/SubnodeCtrl.js","app/js/directives/appVersion.js","app/js/directives/imageFallback.js","app/js/directives/loader.js","app/js/directives/modal.js","app/js/directives/ngBlur.js","app/js/directives/ngFocus.js","app/js/directives/tooltip.js","app/js/filters/decimalFormat.js","app/js/filters/interpolate.js","app/js/filters/localDate.js","app/js/filters/qualitySort.js","app/js/filters/season.js","app/js/services/rest.js","app/js/services/translateProvider.js","app/js/services/update.js","app/js/services/version.js"],"names":["subNode","angular","module","config","$stateProvider","$routeProvider","$locationProvider","$urlRouterProvider","otherwise","state","views","mainView","parent","url","mainView@","templateUrl","controller","html5Mode","$scope","$rootScope","$translate","params","lang","uses","password2","password","selectLangChange","languages","id","name","saveParams","post","then","res","error","window","location","reload","$rest","$loader","$","val","trigger","getLastEpisodes","refresh","lastEpisodes","loading","all","getList","copyright","$stateParams","$timeout","$q","compact","selectedEpisode","subtitlesListShow","showId","filter","season","seasonFilter","expand","unsubs","episodes","_","subtitle","undefined","length","show","one","get","showList","indexOf","searchSubs","e","loadingDone","this","ep","removeClass","currentTarget","addClass","subList","providers","addic7ed","subtitles","content","episode","concat","push","betaSeries","downloadSub","sub","file","subPack","find","icons","remove","success","append","$state","$on","event","toState","currentPage","$watch","path","openModal","modalShow","activeNavId","modalView","closeModal","safeApply","fn","phase","$root","$$phase","$apply","rootFolder","changeShow","transitionTo","selectedTVShow","checkUpdate","upToDate","updateMsg","updateApp","confirm","directive","$version","scope","elm","text","link","$element","$attrs","bind","replaceWith","imageFallback","restrict","replace","template","join","attrs","isLoading","loaderActive","loaderId","factory","loadCount","checkExists","loaderIdList","setLoad","each","split","$broadcast","stopLoading","$controller","$location","baseOverflow","document","body","style","overflow","modalParams","onClose","callbacksList","onOpen","closeOnEsc","kd","ESC","press","unbindPress","opt","off","targetScope","callback","on","preventDefault","modalOpen","modalCtrl","$parse","element","attr","$event","title","tooltip","placement","input","Number","isNaN","version","String","$filter","date","cachedInput","sort","a","b","quality","max","score","query","obj","Restangular","withConfig","RestangularConfigurer","setResponseExtractor","response","newResponse","isArray","forEach","value","key","originalElement","copy","clean","omit","functions","$translateProvider","useStaticFilesLoader","prefix","suffix","useLocalStorage","userLang","navigator","language","userLanguage","preferredLanguage","test","translations","applicationCache","hostname"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar subNode = angular.module('subNode', ['ngResource', 'ngCookies', 'pascalprecht.translate', 'LocalStorageModule', 'ui.state', 'restangular', 'localytics.directives']);\r\n\r\nsubNode.config(['$stateProvider', '$routeProvider', '$locationProvider', '$urlRouterProvider', function($stateProvider, $routeProvider, $locationProvider, $urlRouterProvider, config) {\r\n\t$urlRouterProvider.otherwise(\"/\");\r\n\r\n\t$stateProvider.state('subNode', {\r\n\t\t\tviews: {\r\n\t\t\t\t\"mainView\": {}\r\n\t\t\t}\r\n\t\t}\r\n\t).state('index', {\r\n\t\t\tparent: 'subNode',\r\n\t\t\turl: \"/\", // root route\r\n\t\t\tviews: {\r\n\t\t\t\t\"mainView@\": {\r\n\t\t\t\t\ttemplateUrl: \"partials/home.html\",\r\n\t\t\t\t\tcontroller: 'HomeCtrl'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t).state('show', {\r\n\t\t\tparent: 'subNode',\r\n\t\t\turl: \"/show/:showId\",\r\n\t\t\tviews: {\r\n\t\t\t\t\"mainView@\": {\r\n\t\t\t\t\ttemplateUrl: \"partials/show.html\",\r\n\t\t\t\t\tcontroller: 'ShowCtrl'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\t// Without server side support html5 must be disabled.\r\n\treturn $locationProvider.html5Mode(false);\r\n}]);","'use strict';\r\n\r\nsubNode.controller('ConfigCtrl', ['$scope', '$rootScope', '$translate', '$rest', function($scope, $rootScope, $translate, $rest) {\r\n\t$scope.params.lang = $translate.uses();\r\n\t$scope.params.password2 = $scope.params.password;\r\n\r\n\t$scope.selectLangChange = function() {\r\n\t\t$translate.uses($scope.params.lang);\r\n\t}\r\n\r\n\t$scope.languages = [\r\n\t\t{\r\n\t\t\tid: 'fr',\r\n\t\t\tname: 'Français'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 'en',\r\n\t\t\tname: 'English'\r\n\t\t}\r\n\t];\r\n\r\n\t$scope.saveParams = function() {\r\n\t\t$scope.params.post().then(function(res) {\r\n\t\t\tif(res) {\r\n\t\t\t\t$scope.error = res;\r\n\t\t\t} else {\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}]);","'use strict';\r\n\r\nsubNode.controller('HomeCtrl', ['$scope', '$translate', 'Restangular', '$loader', function($scope, $translate, $rest, $loader) {\r\n\t$(\"#selectedTVShow\").val('').trigger('liszt:updated'); // update select\r\n\r\n\tvar getLastEpisodes = function(refresh) {\r\n\t\t$scope.lastEpisodes = [];\r\n\t\t$loader.loading('home', true);\r\n\t\t$rest.all('lastEpisodes/'+(refresh === true)).getList().then(function(lastEpisodes) {\r\n\t\t\t$loader.loading('home', false);\r\n\t\t\t$scope.lastEpisodes = lastEpisodes;\r\n\t\t});\r\n\t}\r\n\tgetLastEpisodes();\r\n\r\n\t$scope.refresh = function(refresh) {\r\n\t\tgetLastEpisodes(refresh);\r\n\t}\r\n\r\n\t$scope.copyright = $translate('COPYRIGHT');\r\n}]);","'use strict';\r\n\r\nsubNode.controller('ShowCtrl', ['$scope', '$translate', 'Restangular', '$stateParams', '$loader', '$timeout', '$q', function($scope, $translate, $rest, $stateParams, $loader, $timeout, $q) {\r\n\t$loader.loading('app', true);\r\n\t$scope.compact = false;\r\n\t$scope.selectedEpisode = {};\r\n\t$scope.subtitlesListShow = false;\r\n\t$scope.showId = $stateParams.showId;\r\n\r\n\t$scope.filter = function(season) {\r\n\t\t$scope.seasonFilter = season;\r\n\t\t$scope.expand();\r\n\t}\r\n\r\n\t$scope.unsubs = function(episodes) {\r\n\t\treturn _.filter(episodes, {'subtitle': undefined}).length;\r\n\t}\r\n\r\n\t$scope.refresh = function() {\r\n\t\t$scope.show = null;\r\n\t\t$rest.one('show/' + $stateParams.showId).get().then(function(show) {\r\n\t\t\t$loader.loading('app', false);\r\n\t\t\t$scope.show = show;\r\n\t\t\tif(show.length > 0) {\r\n\t\t\t\t$scope.seasonFilter = show[show.length - 1].season; // default filter on last season\r\n\t\t\t}\r\n\t\t\t$scope.showList.then(function(showList) {\r\n\t\t\t\t$(\"#selectedTVShow\").val(showList.indexOf($stateParams.showId)).trigger('liszt:updated');\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.searchSubs = function(e) {\r\n\t\t$loader.loading('subtitles', true);\r\n\t\t$scope.compact = true;\r\n\t\t$scope.loadingDone = false;\r\n\t\t$scope.selectedEpisode = this.ep;\r\n\t\t$('.episode.active').removeClass('active');\r\n\t\t$(e.currentTarget).addClass('active');\r\n\t\t$timeout(function() {\r\n\t\t\t$scope.subtitlesListShow = true;\r\n\t\t}, 600);\r\n\t\t$timeout(function() {\r\n\t\t\t$('.episodesList, .seasonsList').addClass('compacted');\r\n\t\t}, 750);\r\n\r\n\t\t$scope.subList = [];\r\n\r\n\t\tvar providers = [];\r\n\t\tif($scope.params.providers.indexOf('addic7ed') !== -1) {\r\n\t\t\tvar addic7ed = $rest.one('addic7ed/' + $stateParams.showId + '/' + this.ep.name).get();\r\n\t\t\taddic7ed.then(function(subtitles) {\r\n\t\t\t\tif(subtitles[0] && subtitles[0].content[0].episode === $scope.selectedEpisode.episode && subtitles[0].content[0].season === $scope.selectedEpisode.season) {\r\n\t\t\t\t\t$scope.subList = $scope.subList.concat(subtitles);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tproviders.push(addic7ed);\r\n\t\t}\r\n\r\n\t\tif($scope.params.providers.indexOf('betaSeries') !== -1) {\r\n\t\t\tvar betaSeries = $rest.one('betaSeries/' + $stateParams.showId + '/' + this.ep.name).get();\r\n\t\t\tbetaSeries.then(function(subtitles) {\r\n\t\t\t\tif(subtitles[0] && subtitles[0].content[0].episode === $scope.selectedEpisode.episode && subtitles[0].content[0].season === $scope.selectedEpisode.season) {\r\n\t\t\t\t\t$scope.subList = $scope.subList.concat(subtitles);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tproviders.push(betaSeries);\r\n\t\t}\r\n\r\n\t\t$q.all(providers).then(function() {\r\n\t\t\t$loader.loading('subtitles', false);\r\n\t\t\t$scope.loadingDone = true;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.downloadSub = function(e) {\r\n\t\t$loader.loading('subtitles', true);\r\n\t\t$scope.selectedEpisode.subtitle = this.sub;\r\n\t\t$rest.one('download').post(\"\", {\r\n\t\t\tepisode: $scope.selectedEpisode.file,\r\n\t\t\turl: this.subPack.url,\r\n\t\t\tsubtitle: this.sub.file\r\n\t\t}).then(function(res) {\r\n\t\t\t\t$loader.loading('subtitles', false);\r\n\t\t\t\tvar name = $(e.currentTarget).find('.name'),\r\n\t\t\t\t\ticons = name.find('i');\r\n\t\t\t\tif(icons.length > 0) {\r\n\t\t\t\t\ticons.remove();\r\n\t\t\t\t}\r\n\t\t\t\tif(res.success) {\r\n\t\t\t\t\tname.append(' <i class=\"success glyphicon glyphicon-ok\"></i>');\r\n\t\t\t\t\t$('.episode.active').addClass('alert-success');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tname.append(' <i class=\"error glyphicon glyphicon-remove\"></i>');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t$scope.expand = function() {\r\n\t\t$loader.loading('subtitles', false);\r\n\t\t$scope.compact = false;\r\n\t\t$('.episode.active').removeClass('active');\r\n\t\t$scope.subtitlesListShow = false;\r\n\t\t$timeout(function() {\r\n\t\t\t$('.episodesList, .seasonsList').removeClass('compacted');\r\n\t\t}, 750);\r\n\t}\r\n\r\n\t$scope.refresh(); // init\r\n}]);","'use strict';\r\n\r\nsubNode.controller('SubnodeCtrl', ['$scope', '$state', 'Restangular', '$timeout', '$translate', '$loader', function($scope, $state, $rest, $timeout, $translate, $loader) {\r\n\t// Uses the url to determine if the selected menu item should have the class active & to open modal if needed\r\n\t$scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams){\r\n\t\t$scope.currentPage = toState.name;\r\n\t});\r\n\r\n\t$scope.$watch('$location.path()', function(path) {\r\n\t\tswitch(true) {\r\n\t\t\tcase path == '/login':\r\n\t\t\t\t$scope.openModal('partials/' + path + '.html');\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t$scope.modalShow = false;\r\n\t\t}\r\n\t\treturn $scope.activeNavId = path || '/';\r\n\t});\r\n\r\n\t$scope.openModal = function(url) {\r\n\t\t$scope.modalView = url;\r\n\t\t$scope.modalShow = true;\r\n\t}\r\n\r\n\t$scope.closeModal = function() {\r\n\t\t$scope.modalShow = false;\r\n\t}\r\n\r\n\t$scope.safeApply = function(fn) {\r\n\t\tvar phase = this.$root.$$phase;\r\n\t\tif(phase == '$apply' || phase == '$digest') {\r\n\t\t\tif(fn && (typeof(fn) === 'function')) {\r\n\t\t\t\tfn();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.$apply(fn);\r\n\t\t}\r\n\t};\r\n\r\n\t$rest.one('params').get().then(function(params) {\r\n\t\t$scope.params = params;\r\n\t\tif(typeof params.rootFolder === 'undefined') {\r\n\t\t\t$scope.openModal('partials/config.html');\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.showList = $rest.all('showList').getList();\r\n\r\n\t$scope.changeShow = function() {\r\n\t\t$state.transitionTo('show', {showId: $scope.selectedTVShow});\r\n\t}\r\n\r\n\tvar checkUpdate = function() {\r\n\t\t$rest.one('checkUpdate').get().then(function(res) {\r\n\t\t\tif(res.upToDate === false) {\r\n\t\t\t\t$scope.updateMsg = res;\r\n\t\t\t} else {\r\n\t\t\t\t$scope.updateMsg = false;\r\n\t\t\t\t$timeout(function() {\r\n\t\t\t\t\tcheckUpdate();\r\n\t\t\t\t}, 24*60*60*1000);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcheckUpdate();\r\n\r\n\t$scope.updateApp = function() {\r\n\t\t$loader.loading('update', true);\r\n\t\tif(confirm($translate('UPDATE_CONFIRM'))) {\r\n\t\t\t$rest.one('update').get().then(function(res) {\r\n\t\t\t\tif(res.success) {\r\n\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t$loader.loading('update', false);\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$loader.loading('update', false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}]);","'use strict';\r\n\r\nsubNode.directive('appVersion', [\r\n\t'$version', function($version) {\r\n\t\treturn function(scope, elm, attrs) {\r\n\t\t\treturn elm.text($version);\r\n\t\t};\r\n\t}\r\n]);","subNode.directive('imageFallback', function () {\r\n\treturn {\r\n\t\tlink: function postLink($scope, $element, $attrs) {\r\n\t\t\t$element.bind('error', function() {\r\n\t\t\t\t$element.replaceWith('<h1>'+$attrs.imageFallback+'</h1>');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});","'use strict';\r\n\r\nsubNode.directive('loader', [function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t'<div class=\"loader\" ng-show=\"isLoading\">',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t\t'<span class=\"loader-block\"></span>',\r\n\t\t\t'</div>'\r\n\t\t].join(''),\r\n\t\tlink: function($scope, $element, attrs, ngModel) {\r\n\t\t\t$scope.isLoading = attrs.loaderActive;\r\n\t\t\t$scope.$on('loading.'+attrs.loaderId, function(e, isLoading) {\r\n\t\t\t\t$scope.isLoading = isLoading;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}]).factory('$loader', ['$rootScope', function($rootScope) {\r\n\tvar $loader = {\r\n\t\tloadCount: {},\r\n\t\tisLoading: {},\r\n\r\n\t\tcheckExists: function(loaderId) {\r\n\t\t\tif(typeof $loader.loadCount[loaderId] === 'undefined') {\r\n\t\t\t\t$loader.loadCount[loaderId] = 0;\r\n\t\t\t\t$loader.isLoading[loaderId] = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tloading: function loading(loaderIdList, setLoad) {\r\n\t\t\t_.each(loaderIdList.split(' '), function(loaderId) {\r\n\t\t\t\t$loader.checkExists(loaderId);\r\n\t\t\t\tif(setLoad) {\r\n\t\t\t\t\t$loader.loadCount[loaderId]++;\r\n\t\t\t\t} else if($loader.loadCount[loaderId] > 0) {\r\n\t\t\t\t\t$loader.loadCount[loaderId]--;\r\n\t\t\t\t}\r\n\t\t\t\tif($loader.loadCount[loaderId] > 0 && !$loader.isLoading[loaderId]) {\r\n\t\t\t\t\t$loader.isLoading[loaderId] = true;\r\n\t\t\t\t\t$rootScope.$broadcast('loading.'+loaderId, true);\r\n\t\t\t\t} else if($loader.loadCount[loaderId] == 0 && $loader.isLoading[loaderId]) {\r\n\t\t\t\t\t$loader.isLoading[loaderId] = false;\r\n\t\t\t\t\t$rootScope.$broadcast('loading.'+loaderId, false);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tstopLoading: function(loaderId) {\r\n\t\t\t$loader.checkExists(loaderId);\r\n\t\t\t$loader.loadCount[loaderId] = 0;\r\n\t\t\t$loader.isLoading[loaderId] = false;\r\n\t\t\t$rootScope.$broadcast('loading.'+loaderId, false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn $loader;\r\n}]);","'use strict';\r\n\r\nsubNode.directive('modal', ['$rootScope', '$controller', '$location', '$timeout', function($rootScope, $controller, $location, $timeout) {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\treplace: true,\r\n\t\ttemplate: [\r\n\t\t\t'<div class=\"modal-wrapper\" ng-show=\"modalShow\" ng-animate=\"{show: \\'fade-in\\', hide: \\'\\'}\">',\r\n\t\t\t\t'<div class=\"modal-backdrop fade in\"></div>',\r\n\t\t\t\t'<div role=\"dialog\" tabindex=\"-1\" class=\"modal fade in\">',\r\n\t\t\t\t\t'<div class=\"modal-dialog\">',\r\n\t\t\t\t\t\t'<div class=\"modal-content\" ng-include=\"modalView\"></div>',\r\n\t\t\t\t\t'</div>',\r\n\t\t\t\t'</div>',\r\n\t\t\t'</div>'\r\n\t\t].join(''),\r\n\r\n\t\tlink: function($scope, $element, attrs) {\r\n\t\t\tvar baseOverflow = document.body.style.overflow,\r\n\t\t\t\tmodalParams = {},\r\n\t\t\t\tonClose = function() {\r\n\t\t\t\t\tif(typeof modalParams.onClose === 'function') {\r\n\t\t\t\t\t\tmodalParams.onClose();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.callbacksList = []; // forget all callbacks\r\n\t\t\t\t\t$scope.modalView = ''; // remove the current view\r\n\t\t\t\t}\r\n\t\t\t$scope.$watch('modalShow', function(show) {\r\n\t\t\t\tif(show) {\r\n\t\t\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t\t\t\tif(typeof modalParams.onOpen === 'function') {\r\n\t\t\t\t\t\tmodalParams.onOpen();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(modalParams.closeOnEsc !== false) { // close modal on ESC key ?\r\n\t\t\t\t\t\tkd.ESC.press(function() {\r\n\t\t\t\t\t\t\tkd.ESC.unbindPress();\r\n\t\t\t\t\t\t\t$scope.$apply(function() {\r\n\t\t\t\t\t\t\t\t$scope.modalShow = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.style.overflow = baseOverflow;\r\n\t\t\t\t\tonClose();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$rootScope.openModal = function(opt) {\r\n\t\t\t\tif(typeof opt === 'string') {\r\n\t\t\t\t\topt = {\r\n\t\t\t\t\t\turl: opt\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof modalParams === 'object') {\r\n\t\t\t\t\tif($scope.modalShow === true && opt.url === modalParams.url && modalParams.path !== $location.path()) { // if modal already opened & same url but different path\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t$timeout(function() { // let the ng-include detect that it's now empty\r\n\t\t\t\t\t\t\t$rootScope.openModal(opt);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmodalParams = opt;\r\n\t\t\t\t\tmodalParams.path = $location.path();\r\n\t\t\t\t\t$scope.modalShow = true;\r\n\r\n\t\t\t\t\tvar off = $scope.$on('$includeContentLoaded', function(event) { // on view load\r\n\t\t\t\t\t\tmodalParams.scope = event.targetScope;\r\n\t\t\t\t\t\tif(typeof modalParams.controller === 'string') {\r\n\t\t\t\t\t\t\t$controller(modalParams.controller, {$scope: event.targetScope}); // inject controller\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toff();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.modalView = modalParams.url; // load the view\r\n\r\n\t\t\t\t\tif(typeof callback === 'function') {\r\n\t\t\t\t\t\t$scope.callbacksList.push(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$rootScope.closeModal = function() {\r\n\t\t\t\t$scope.modalShow = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}]).directive('modalOpen', ['$rootScope', function($rootScope) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, $element, $attrs) {\r\n\t\t\t$element.on('click', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif(typeof $attrs.modalOpen === 'string') {\r\n\t\t\t\t\t$scope.$apply(function() {\r\n\t\t\t\t\t\t$rootScope.openModal({\r\n\t\t\t\t\t\t\turl: $attrs.modalOpen,\r\n\t\t\t\t\t\t\tcontroller: $attrs.modalCtrl\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}]);","'use strict';\r\n\r\nsubNode.directive('ngBlur', ['$parse', function($parse) {\r\n    return function(scope, element, attr) {\r\n        var fn = $parse(attr['ngBlur']);\r\n        element.bind('blur', function(event) {\r\n            scope.$apply(function() {\r\n                fn(scope, {$event:event});\r\n            });\r\n        });\r\n    }\r\n}]);","'use strict';\r\n\r\nsubNode.directive('ngFocus', ['$parse', function($parse) {\r\n    return function(scope, element, attr) {\r\n        var fn = $parse(attr['ngFocus']);\r\n        element.bind('focus', function(event) {\r\n            scope.$apply(function() {\r\n                fn(scope, {$event:event});\r\n            });\r\n        });\r\n    }\r\n}]);","'use strict';\r\n\r\nsubNode.directive('tooltip', ['$parse', function($parse) {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, $element, attrs) {\r\n\t\t\t$scope.$watch(attrs, function() {\r\n\t\t\t\tif(attrs.title) {\r\n\t\t\t\t\t$element.tooltip({\r\n\t\t\t\t\t\ttitle: attrs.title,\r\n\t\t\t\t\t\tplacement: 'top'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}]);","'use strict';\r\n\r\nsubNode.filter('decimalFormat', function() {\r\n\t\treturn function(input) {\r\n\t\t\tif(Number.isNaN(input)) return input;\r\n\r\n\t\t\treturn input < 10 ? '0' + input : input;\r\n\t\t};\r\n\t}\r\n);","'use strict';\r\n\r\nsubNode.filter('interpolate', ['version', function(version) {\r\n\t\treturn function(text) {\r\n\t\t\treturn String(text).replace(/\\%VERSION\\%/mg, version);\r\n\t\t};\r\n\t}\r\n]);","'use strict';\r\n\r\nsubNode.filter('localDate', ['$filter', '$translate', function($filter, $translate) {\r\n\t\treturn function(date) {\r\n\t\t\treturn $filter('date')(date, $translate('DATE_FORMAT')) + ' ' + $translate('AT') + ' ' + $filter('date')(date, $translate('TIME_FORMAT'));\r\n\t\t};\r\n\t}\r\n]);","'use strict';\r\n\r\nsubNode.filter('qualitySort', function() {\r\n\t\tvar cachedInput;\r\n\t\treturn function(input) {\r\n\t\t\tif(!input || cachedInput === input) return input;\r\n\r\n\t\t\tcachedInput = input.sort(function(a, b) {\r\n\t\t\t\treturn a.quality == b.quality ? _.max(b.content, 'score').score - _.max(a.content, 'score').score : b.quality - a.quality;\r\n\t\t\t});\r\n\r\n\t\t\treturn cachedInput;\r\n\t\t};\r\n\t}\r\n);","'use strict';\r\n\r\nsubNode.filter('seasonFilter', function() {\r\n\t\treturn function(input, query) {\r\n\t\t\tif(!query) return input;\r\n\r\n\t\t\treturn  [_.find(input, function(obj) {\r\n\t\t\t\treturn obj.season == query;\r\n\t\t\t})];\r\n\t\t};\r\n\t}\r\n);","'use strict';\r\n\r\nsubNode.factory('$rest', ['Restangular', function(Restangular) {\r\n\tvar $rest = Restangular.withConfig(function(RestangularConfigurer) {\r\n\t\t// Modifie la récup des réponses pour pouvoir accéder à la réponse d'origine (data clean)\r\n\t\tRestangularConfigurer.setResponseExtractor(function(response) {\r\n\t\t\tvar newResponse = response;\r\n\t\t\tif(angular.isArray(response)) {\r\n\t\t\t\tangular.forEach(newResponse, function(value, key) {\r\n\t\t\t\t\tnewResponse[key].originalElement = angular.copy(value);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tnewResponse.originalElement = angular.copy(response);\r\n\t\t\t}\r\n\r\n\t\t\treturn newResponse;\r\n\t\t});\r\n\t});\r\n\r\n\t// nettoye un objet Restangular des propriétés & fonctions ajoutées\r\n\t$rest.clean = function clean(obj) {\r\n\t\treturn _.omit(obj, _.functions(obj), ['originalElement', 'parentResource', 'restangularCollection', 'route']);\r\n\t}\r\n\r\n\treturn $rest;\r\n}]);","'use strict';\r\n\r\nsubNode.config(['$translateProvider', function($translateProvider) {\r\n    $translateProvider.useStaticFilesLoader({\r\n        prefix: 'i18n/locale-',\r\n        suffix: '.json'\r\n    });\r\n\r\n    $translateProvider.useLocalStorage();\r\n\tvar userLang = navigator.language || navigator.userLanguage; // use navigator lang if available\r\n\t$translateProvider.preferredLanguage(/(fr|en)/gi.test(userLang) ? userLang : 'en');\r\n    $translateProvider.translations();\r\n}]);","'use strict';\r\n\r\nsubNode.factory('$update', ['$translate', function($translate) {\r\n    $(window.applicationCache).on('updateready', function() {\r\n        if(/(oox.lu|localhost|127.0.0.1)/gi.test(window.location.hostname)) {\r\n             window.location.reload();\r\n        } else {\r\n            if(confirm($translate('UPDATE_DESC'))) {\r\n                window.location.reload();\r\n            }\r\n        }\r\n    });\r\n}]);","'use strict';\r\n\r\nsubNode.factory('$version', function() {\r\n\treturn \"1.0.0\";\r\n});"]}